% Document class.
\documentclass[
$if(fontsize)$
    $fontsize$,
$endif$
$if(lang)$
    $babel-lang$,
$endif$
$if(papersize)$
    $papersize$paper,
$endif$
$for(classoption)$
    $classoption$$sep$,
$endfor$
]{$documentclass$}

% Geometry.
\usepackage[$for(geometry)$$geometry$$sep$,$endfor$]{geometry}

% General packages.
\usepackage[T1]{fontenc}
\usepackage{mathptmx}
\usepackage{fancyhdr}
\usepackage{datetime}
\usepackage{multicol}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{changepage}
\usepackage{titlesec}
\usepackage{contour}
\usepackage{ulem}
\usepackage{vwcol}
\usepackage{paracol}

% Commands.
\newcommand{\HRule}{\noindent\rule{\linewidth}{0.1mm}}
\setlength\parindent{0pt}
\newcommand\tab[1][1cm]{\hspace*{#1}}

% Hyperref config.
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
}
\urlstyle{same}

% Section config.
\titleformat{\section}[runin]
  {\normalfont\scshape}{\thesection}{1em}{}

% Underline.
\renewcommand{\ULdepth}{1.8pt}
\contourlength{0.8pt}
\newcommand{\muline}[1]{%
  \uline{\phantom{#1}}%
  \llap{\contour{white}{#1}}%
}

% Paracol columns width.
\makeatletter
\newcommand{\setlocalcolumnwidth}[1]{%
  \let\oldratio\pcol@columnratioleft
  \setcolumnwidth{#1}%
}
\newcommand{\restorelocalcolumnwidth}{%
  \let\pcol@columnratioleft\oldratio%
}
\makeatother

% Numbering.
$if(numbersections)$
    \setcounter{secnumdepth}{$if(secnumdepth)$$secnumdepth$$else$5$endif$}
$else$
    \setcounter{secnumdepth}{-\maxdimen}
$endif$

% Header include.
$for(header-includes)$
    $header-includes$
$endfor$


% Footer.
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\fancyfoot[R]{\scriptsize{Updated \usdate\today}}

% Begin document.
\begin{document}

% Title
\vspace*{-2cm}
\setlocalcolumnwidth{3cm, 10cm, 4cm}
\begin{paracol}{3}
\begin{flushleft}
    \scriptsize
    \vspace*{\fill}
    $if(linkedin)$
        \begin{minipage}{0.8\baselineskip}
            \includegraphics[width=\linewidth]{rsc/img/logos/linkedin}
        \end{minipage}
        \href{https://www.linkedin.com/in/$linkedin$}{in/$linkedin$}
        \linebreak
    $endif$
    $if(github)$
        \begin{minipage}{0.8\baselineskip}
            \includegraphics[width=\linewidth]{rsc/img/logos/github}
        \end{minipage}
        \href{https://github.com/$github$}{$github$}
        \linebreak
    $endif$
    $if(website)$
        \begin{minipage}{0.8\baselineskip}
            \includegraphics[width=\linewidth]{rsc/img/logos/website}
        \end{minipage}
        \href{https://$website$}{$website$}
        \linebreak
    $endif$
    $if(email)$
        \begin{minipage}{0.8\baselineskip}
            \includegraphics[width=\linewidth]{rsc/img/logos/email}
        \end{minipage}
        \href{mailto:$email$?subject=Heyy!&body=What can I do for you? :)}{$email$}
        \linebreak
    $endif$
    $if(phone)$
        \begin{minipage}{0.8\baselineskip}
            \includegraphics[width=\linewidth]{rsc/img/logos/phone}
        \end{minipage}
        $phone$
    $endif$
\end{flushleft}
\switchcolumn[1]

\begin{center}
    \huge
    \vspace*{\fill}
    \textbf{$author$}
    \vspace{0.1cm}

    \scriptsize
    $subtitle$
\end{center}
\switchcolumn[2]

\begin{flushright}
    \scriptsize
    \vspace*{\fill}
    $if(address)$
        $address$
    $endif$
\end{flushright}
\end{paracol}
\restorelocalcolumnwidth
\vspace{-0.3cm}
\HRule
\vspace{0cm}
\thispagestyle{fancy}

% Include before.
$for(include-before)$
    $include-before$
$endfor$

% Body.
$body$

% Formations.
\section{Formations}
\footnotesize
\begin{adjustwidth}{3cm}{0cm}
    $for(formations)$
    \textbf{$formations.name$}, $formations.location$\hfill \textit{$formations.period$}
        \begin{adjustwidth}{0.6cm}{0cm}
            $formations.description$
        \end{adjustwidth}
        $sep$\vspace{0.8cm}
    $endfor$
\end{adjustwidth}

% Experiences.
\section{Experiences}
\footnotesize
\begin{adjustwidth}{3cm}{0cm}
    $for(experiences)$
    \textbf{$experiences.name$}, $experiences.location$
        \begin{adjustwidth}{0.6cm}{0cm}
            $for(experiences.posts)$
                \textit{$experiences.posts.name$}\hfill \textit{$experiences.posts.period$}\\
                $experiences.posts.description$
                $sep$\\\\
            $endfor$
        \end{adjustwidth}
        $sep$\vspace{0.8cm}
    $endfor$
\end{adjustwidth}

% Include after.
$for(include-after)$
    $include-after$
$endfor$

% End document.
\end{document}
